{"version":3,"file":"static/webpack/static/development/pages/cartoon.js.01ddf9359538a9da48d2.hot-update.js","sources":["webpack:///./src/utils/fetch.js"],"sourcesContent":["import debug from \"./log\";\nimport constant from \"./constant\";\nimport axios from \"axios\";\n\nconst { BASE_URL, RESPONSE_OK } = constant;\ndebug.log(BASE_URL);\nconst Ajax = ({ method, url, data }) =>\n  new Promise(async (resolve, reject) => {\n    url = BASE_URL + url;\n\n    const token = \"NONE-TOKEN\";\n    const headers = {\n      Authorization: token\n    };\n    axios({\n      method,\n      url,\n      data,\n      timeout: 2000,\n      headers\n    }).then(res => {\n      debug.log(res);\n      if (res.status === 200 && res.data && res.data.code === RESPONSE_OK) {\n        resolve(res.data);\n      } else if (\n        res.status === 200 &&\n        res.data &&\n        res.data.code !== RESPONSE_OK\n      ) {\n        const err = {\n          errCode: res.data.code,\n          errMsg: res.data.msg\n        };\n        reject(err);\n      } else {\n        const err = {\n          errCode: -1,\n          errMsg: \"请求失败\"\n        };\n        reject(err);\n      }\n    });\n  }).catch(error => {\n    const err = {\n      errCode: -1,\n      errMsg: \"请求失败\"\n    };\n    reject(err);\n  });\n\nconst get = (url, data) => {\n  url =\n    url +\n    \"?\" +\n    Object.keys(data)\n      .map(k => encodeURIComponent(k) + \"=\" + encodeURIComponent(data[k]))\n      .join(\"&\");\n  return Ajax({\n    url,\n    method: \"get\"\n  });\n};\n\nconst post = (url, data) =>\n  Ajax({\n    url,\n    data,\n    method: \"post\"\n  });\n\nexport default {\n  get,\n  post\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAAA;AACA;AACA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAoCA;AACA;AACA;AAFA;AAIA;AACA;AA1CA;AACA;AA2CA;AACA;AAIA;AAAA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AADA;AACA;AAMA;AACA;AACA;AAFA;;;;A","sourceRoot":""}